version: 2

tests:
not_null_test: &not_null_test
  - not_null

models:
  - name: rep_sales_funnel_monthly
    description: "Monthly sales funnel metrics including main and sub-steps (2.1, 3.1)."

    columns:
      - name: month
        description: "Month of the funnel, formatted as MM-YYYY."
        tests:
          - not_null

      - name: funnel_step
        description: "Funnel step including main steps and sub-steps (e.g., 2, 2.1, 3, 3.1)."
        tests:
          - not_null
          - accepted_values:
              values: [1,2,2.1,3,3.1,4,5,6,7,8,9]

      - name: kpi_name
        description: "KPI label for each funnel step (e.g., 'SALES CALL 1')."
        tests: *not_null_test

      - name: deal_count
        description: "Number of deals in each funnel step for the given month."
        tests: *not_null_test